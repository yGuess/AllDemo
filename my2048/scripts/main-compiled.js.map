{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main-compiled.js","sourcesContent":["/**\n * Created by 浩 on 2016/9/9.\n */\n\n// 记录界面上对应位置上的数据\nvar numCells = [[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];\nvar score = 0;\nvar showScore = document.querySelector('.score');\n\nwindow.onload = function(){\n    init();\n\n    // 键盘侦听\n    keydownListen();\n}\n\nfunction init(){\n    var i,j;\n    for(i=0; i<4 ; i++){\n        for(j=0; j<4 ; j++){\n            var num = i*4+j+1;\n            var cell = document.querySelector('#cell-'+num);\n\n            cell.style.backgroundColor = '#ccc0b3';\n            cell.style.top = 16*(i+1) + 80*i + 'px';\n            cell.style.left = 16*(j+1) + 80*j + 'px';\n        }\n    }\n\n    randomACell();\n    randomACell();\n\n    var twoCell = document.querySelectorAll('.numCell');\n    compareScore(twoCell[0].innerHTML,twoCell[1].innerHTML);\n    updateScore();\n}\n\nfunction keydownListen() {\n    document.onkeydown = function(event){\n        //console.log(numCells);\n        var evt = event || window.event;\n        switch(evt.keyCode){\n            //左\n            case 37: leftMove();break;\n            //上\n            case 38: upMove();break;\n            //右\n            case 39: rightMove();break;\n            //下\n            case 40: downMove();break;\n        }\n        setTimeout(randomACell,200);\n        setTimeout(isGameOver,200);\n        //console.log(score);\n    }\n}\n/*\n *      随机产生一个带数字的方块,随机30次。\n *      超过30次未找到合适的位置，即按顺序查找空位\n */\nfunction randomACell(){\n    if(isFull()){\n        return false;\n    }\n\n    var randomX,randomY;\n    var times = 0; //计算随机次数\n    do{\n        if(times == 30){\n            break;\n        }\n        randomX = parseInt(Math.floor(Math.random()*4));\n        randomY = parseInt(Math.floor(Math.random()*4));\n\n        times++;\n    }while(isZero(randomX,randomY))\n\n    if(times == 30){\n        for(var i=0; i<4; i++){\n            for(var j=0; j<4; j++){\n                if(numCells[i][j] == 0){\n                    randomX = i;\n                    randomY = j;\n                }\n            }\n        }\n    }\n    // 产生、添加新方块\n    var newCell = document.createElement('div');\n    newCell.style.backgroundColor = 'rgb(237, 224, 200)';\n    newCell.style.top = 16*(randomX+1) + 80*randomX + 'px';\n    newCell.style.left = 16*(randomY+1) + 80*randomY + 'px';\n\n    var cellValue = Math.random()>=0.5 ? 1:2;\n    newCell.innerHTML = cellValue;\n    numCells[randomX][randomY] = cellValue;\n    //console.log(numCells);\n\n    newCell.setAttribute('class','numCell');\n    document.querySelector('#wrap').appendChild(newCell);\n\n    updateScore();\n}\n/*\n *      标记同一位置上多余的方块,并修改该位置上方块的显示值\n *      同时比较得出所有方块显示值的最大值\n */\nfunction markAndUpdateCell(desTop, desLeft, value){\n    var cellArr = document.querySelectorAll('.numCell');\n    var i,j,len = cellArr.length;\n    //console.log(desTop+' '+desLeft);\n\n    setTimeout(function(){\n        for(i=0,j=0; i<len; i++){\n            if(cellArr[i].offsetTop == desTop && cellArr[i].offsetLeft == desLeft){\n                cellArr[i].innerHTML = value;\n                if(j>=1){\n                    cellArr[i].setAttribute('class','numCell mark');\n                }\n                j++;\n            }\n            compareScore(score,parseInt(cellArr[i].innerHTML));\n            //console.log(desTop+' '+desLeft);\n        }\n    },200);\n}\nfunction removeMarkedCell(){\n    var markCells = document.querySelectorAll('.mark');\n    var parent = document.querySelector('#wrap');\n    for(var len=markCells.length-1; len>=0; len--){\n        parent.removeChild(markCells[len]);\n    }\n}\nfunction getCell(childNodes,row,col){\n    var len = childNodes.length,i;\n    for(i=0; i<len; i++){\n        if(childNodes[i].offsetTop == row && childNodes[i].offsetLeft == col){\n            return childNodes[i];\n        }\n    }\n}\n/*\n *      检测两个横向位置上的点之间是否存在其他数\n */\nfunction horizon(posTop,fromLeft,toLeft){\n    for(var k=fromLeft+1; k<toLeft ; k++){\n        if(numCells[posTop][k] != 0){\n            return false;\n        }\n    }\n    return true;\n}\nfunction vertical(posLeft,fromTop,toTop){\n    for(var i=fromTop+1; i<toTop ; i++){\n        if(numCells[i][posLeft] != 0){\n            return false;\n        }\n    }\n    return true;\n}\nfunction compareScore(s1,s2){\n    score = s1>s2 ?　s1:s2;\n}\nfunction updateScore(){\n    showScore.innerHTML = score;\n}\nfunction isFull(){\n    var i,j;\n    for(i=0; i<4 ; i++){\n        for(j=0; j<4 ; j++){\n            if(numCells[i][j] == 0){\n                return false;\n            }\n        }\n    }\n    return true;\n}\nfunction isSameValue(){\n    var i,j;\n    for(i=0; i<4; i++){\n        for(j=0; j<4; j++){\n            try {\n                if (i == 3 && j == 3) {\n                    return true;\n                } else if (i == 3 && j != 3 && numCells[i][j] == numCells[i][j + 1]) {\n                    return false;\n                } else if (i != 3 && j == 3 && numCells[i][j] == numCells[i + 1][j]) {\n                    return false;\n                } else if (numCells[i][j] == numCells[i][j + 1] ||\n                    numCells[i][j] == numCells[i + 1][j]) {\n                    return false;\n                }\n            }catch(error){\n                console.log(i+' '+j);\n            }\n        }\n    }\n}\nfunction isGameOver(){\n    if(!isFull() || !isSameValue()){\n        //console.log(numCells);\n        return false;\n    }\n    setTimeout(function(){\n        alert('游戏结束！');\n        window.location.reload();\n    },210);\n}\nfunction isZero(posX,posY){\n    return numCells[posX][posY] ? true : false;\n}\nfunction getCellPos(cell){\n    var top = cell.offsetTop,\n        left = cell.offsetLeft;\n    var col = parseInt((top%80)/16),\n        row = parseInt((left%80)/16);\n\n    return [col-1,row-1];\n}"]}